<header class="d-flex flex-wrap align-items-center justify-content-between py-3 mb-4 border-bottom px-4 bg-white shadow-sm">
  <!-- Logo -->
  <div class="col-md-3 mb-2 mb-md-0 d-flex align-items-center">
    <a routerLink="/" class="d-inline-flex align-items-center link-body-emphasis text-decoration-none">
      <i class="bi bi-fire me-2 fs-3 text-danger"></i>
      <span class="fs-4 fw-bold">Guildnet</span>
    </a>
  </div>

  <!-- Navegación -->
  <nav class="col-12 col-md-auto mb-2 justify-content-center mb-md-0">
    <ul class="nav nav-pills">
      <li class="nav-item">
        <a routerLink="/communities" class="nav-link px-3 link-secondary" aria-current="page">
          <i class="bi bi-house-door me-1"></i>Inicio
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/communities/search" class="nav-link px-3">
          <i class="bi bi-search me-1"></i>Buscar Comunidad
        </a>
      </li>
      <li class="nav-item" *ngIf="currentUser">
        <a class="btn btn-outline-primary d-flex align-items-center ms-3" [routerLink]="['/communities/create']">
          <i class="bi bi-plus-circle me-1"></i>Crear comunidad
        </a>
      </li>
    </ul>
  </nav>

  <!-- Área de usuario -->
  <div class="col-md-3 text-end">
    <ng-container *ngIf="!currentUser; else loggedIn">
      <button type="button" class="btn btn-outline-primary me-2" routerLink="/login">
        <i class="bi bi-box-arrow-in-right me-1"></i>Login
      </button>
      <button type="button" class="btn btn-primary" routerLink="/register">
        <i class="bi bi-person-plus-fill me-1"></i>Registrarse
      </button>
    </ng-container>

    <ng-template #loggedIn>
      <div class="d-flex align-items-center justify-content-end">
        <a
          routerLink="/profile"
          class="btn btn-outline-secondary me-2 d-inline-flex align-items-center"
          style="text-decoration: none;"
        >
          <img
            *ngIf="currentUser?.profileImage"
            [src]="currentUser?.profileImage"
            alt="Imagen de perfil"
            class="rounded-circle me-2"
            width="30"
            height="30"
          />
          <i class="bi bi-person-circle me-1" *ngIf="!currentUser?.profileImage"></i>
          <span>{{ currentUser?.username || 'Perfil' }}</span>
        </a>
        <button type="button" class="btn btn-danger" (click)="logout()">
          <i class="bi bi-box-arrow-right me-1"></i>Salir
        </button>
      </div>
    </ng-template>
  </div>
</header>
